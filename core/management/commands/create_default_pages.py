"""
Команда для создания страниц по умолчанию.
Использование: python manage.py create_default_pages
"""
from django.core.management.base import BaseCommand
from core.models import Page


class Command(BaseCommand):
    help = 'Создает страницы по умолчанию для редактирования'

    def handle(self, *args, **options):
        pages_data = [
            {
                'slug': 'about',
                'title': 'О компании',
                'content': '''<p><strong>Onesimus</strong> — официальные представители китайского бренда Onesimus в России. Мы специализируемся на импорте качественных автозапчастей из Китая и их реализации как оптом, так и в розницу.</p>

<p>Наша компания работает напрямую с производителями, что позволяет нам предлагать выгодные цены без посредников. Мы занимаемся импортом запчастей для различных марок автомобилей и обеспечиваем их реализацию по всей России.</p>

<h2>Оптовые продажи</h2>
<p>Мы предлагаем выгодные условия для оптовых покупателей. При больших объемах закупок предоставляем специальные цены и индивидуальные условия сотрудничества. Свяжитесь с нами для получения оптового прайс-листа и условий работы.</p>

<h2>Наши преимущества</h2>
<ul>
    <li>Большой ассортимент запчастей</li>
    <li>Работаем с проверенными производителями</li>
    <li>Гарантия качества на все товары</li>
    <li>Быстрая доставка по всей России</li>
    <li>Консультации специалистов</li>
    <li>Индивидуальный подход к каждому клиенту</li>
</ul>

<h2>Как мы работаем</h2>
<ol>
    <li>Вы оставляете заявку на сайте или звоните нам</li>
    <li>Наш специалист уточняет детали и подбирает товар</li>
    <li>Оформляем заказ и отправляем в доставку</li>
    <li>Вы получаете качественные запчасти</li>
</ol>''',
                'meta_title': 'О компании - Onesimus',
                'meta_description': 'Onesimus - официальные представители китайского бренда Onesimus в России. Импорт автозапчастей из Китая оптом и в розницу.',
            },
            {
                'slug': 'payment-delivery',
                'title': 'Оплата и доставка',
                'content': '''<h2>Способы оплаты</h2>

<h3>Наличный расчет или оплата по терминалу</h3>
<p>При самовывозе из нашего склада в г. Уссурийск вы можете оплатить наличными или банковской картой через терминал.</p>

<h3>Банковским переводом с карты на карту</h3>
<p>Оплата переводом на банковскую карту. После оформления заказа мы вышлем реквизиты для оплаты. Обязательно укажите номер заказа при переводе.</p>

<h3>Безналичная оплата для юридических лиц</h3>
<p>Для организаций возможна оплата по безналичному расчету. Работаем без НДС. Стоимость запчасти увеличивается на 7% при безналичной оплате.</p>

<h2>Доставка</h2>

<p>Отправку оплаченных заказов мы осуществляем через любые транспортные компании, доступные в нашем городе.</p>

<h3>Доставка до транспортных компаний</h3>
<ul>
    <li><strong>ТК Энергия и ТК СДЭК:</strong> доставка заказов до терминала — 200 руб.</li>
    <li><strong>Другие ТК:</strong> вызываем курьера, стоимость доставки уточняется индивидуально.</li>
</ul>

<p><strong>Дополнительная упаковка товара:</strong> 100 руб. (рекомендуется для хрупких товаров)</p>

<h3>Наши партнеры — транспортные компании</h3>
<p><strong>Все логотипы ТК кликабельны</strong> — перейдите на сайт компании для точного расчета стоимости доставки.</p>''',
                'meta_title': 'Оплата и доставка - Onesimus',
                'meta_description': 'Условия оплаты и доставки автозапчастей. Способы оплаты, транспортные компании, калькулятор доставки.',
            },
            {
                'slug': 'contacts',
                'title': 'Контакты',
                'content': '''<p>Свяжитесь с нами любым удобным способом:</p>

<h2>Контактная информация</h2>
<p>Мы всегда готовы помочь вам с выбором автозапчастей и ответить на все ваши вопросы.</p>''',
                'meta_title': 'Контакты - Onesimus',
                'meta_description': 'Контактная информация Onesimus. Телефон, email, адрес, режим работы.',
            },
        ]

        created_count = 0
        updated_count = 0

        for page_data in pages_data:
            page, created = Page.objects.update_or_create(
                slug=page_data['slug'],
                defaults={
                    'title': page_data['title'],
                    'content': page_data['content'],
                    'meta_title': page_data.get('meta_title', ''),
                    'meta_description': page_data.get('meta_description', ''),
                    'is_active': True,
                }
            )
            if created:
                created_count += 1
                self.stdout.write(
                    self.style.SUCCESS(f'✓ Создана страница: {page.get_slug_display()}')
                )
            else:
                updated_count += 1
                self.stdout.write(
                    self.style.WARNING(f'→ Обновлена страница: {page.get_slug_display()}')
                )

        self.stdout.write(
            self.style.SUCCESS(
                f'\nГотово! Создано: {created_count}, Обновлено: {updated_count}'
            )
        )

