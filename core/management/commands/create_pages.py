from django.core.management.base import BaseCommand
from core.models import Page


class Command(BaseCommand):
    help = 'Создает все редактируемые страницы с начальным контентом'

    def handle(self, *args, **options):
        pages_data = [
            {
                'slug': 'privacy-policy',
                'title': 'Политика в отношении обработки персональных данных',
                'content': self.get_privacy_policy_content(),
            },
            {
                'slug': 'consent',
                'title': 'Согласие на обработку персональных данных',
                'content': self.get_consent_content(),
            },
            {
                'slug': 'public-offer',
                'title': 'Информация на сайте не является публичной офертой',
                'content': self.get_public_offer_content(),
            },
            {
                'slug': 'wholesale',
                'title': 'Оптовые продажи',
                'content': self.get_wholesale_content(),
            },
        ]

        for page_data in pages_data:
            page, created = Page.objects.update_or_create(
                slug=page_data['slug'],
                defaults={
                    'title': page_data['title'],
                    'content': page_data['content'],
                    'is_active': True,
                }
            )
            if created:
                self.stdout.write(self.style.SUCCESS(f'Создана страница: {page.title}'))
            else:
                self.stdout.write(self.style.WARNING(f'Обновлена страница: {page.title}'))

        self.stdout.write(self.style.SUCCESS('Готово!'))

    def get_privacy_policy_content(self):
        return '''<h2>1. Общие положения</h2>

<p><strong>1.1.</strong> Настоящая Политика Индивидуального предпринимателя Щербович Елены Николаевны в отношении обработки персональных данных (далее - Политика) разработана во исполнение требований п. 2 ч. 1 ст. 18.1 Федерального закона от 27.07.2006 № 152-ФЗ «О персональных данных» (далее - Закон о персональных данных) в целях обеспечения защиты прав и свобод человека и гражданина при обработке его персональных данных, в том числе защиты прав на неприкосновенность частной жизни, личную и семейную тайну.</p>

<p><strong>1.2.</strong> Политика действует в отношении всех персональных данных, которые обрабатывает Индивидуальный предприниматель Щербович Елена Николаевна, зарегистрированный в соответствии с законодательством Российской Федерации 21 августа 2019 г за основным государственным регистрационным номером индивидуального предпринимателя 319253600080189, идентификационный номер налогоплательщика 250703414475, (далее - Оператор, ИП Щербович Е.Н.).</p>

<p><strong>1.3.</strong> Политика распространяется на отношения в области обработки персональных данных, возникшие у Оператора как до, так и после утверждения настоящей Политики.</p>

<p><strong>1.4.</strong> Во исполнение требований ч. 2 ст. 18.1 Закона о персональных данных настоящая Политика размещена на сайте Оператора <a href="https://onesimus25.ru/">https://onesimus25.ru/</a>.</p>

<p><strong>1.5.</strong> Пользователь обязан полностью ознакомиться с настоящей Политикой до момента использования Сайта. В случае несогласия с условиями обработки персональных данных Оператором, пользователь должен воздержаться от дальнейшего использования Сайта.</p>

<p><strong>1.6.</strong> Основные понятия, используемые в Политике:</p>
<ul>
    <li><strong>персональные данные</strong> - любая информация, относящаяся к прямо или косвенно определенному или определяемому физическому лицу (субъекту персональных данных);</li>
    <li><strong>оператор персональных данных (оператор)</strong> - государственный орган, муниципальный орган, юридическое или физическое лицо, самостоятельно или совместно с другими лицами организующие и (или) осуществляющие обработку персональных данных;</li>
    <li><strong>веб-сайт</strong> - совокупность графических и информационных материалов, а также программ для ЭВМ и баз данных, обеспечивающих их доступность в сети интернет по сетевому адресу <a href="https://onesimus25.ru/">https://onesimus25.ru/</a>;</li>
    <li><strong>обработка персональных данных</strong> - любое действие (операция) или совокупность действий (операций) с персональными данными, совершаемых с использованием средств автоматизации или без их использования.</li>
</ul>

<h2>2. Правовые основания обработки персональных данных</h2>

<p><strong>2.1.</strong> Правовым основанием обработки персональных данных является совокупность нормативных правовых актов, во исполнение которых и в соответствии с которыми Оператор осуществляет обработку персональных данных, в том числе:</p>
<ul>
    <li>Конституция Российской Федерации;</li>
    <li>Гражданский кодекс Российской Федерации;</li>
    <li>Федеральный закон от 27.07.2006 № 152-ФЗ «О персональных данных»;</li>
</ul>

<p><strong>2.2.</strong> Правовым основанием обработки персональных данных также являются:</p>
<ul>
    <li>договоры, заключаемые между Оператором и субъектами персональных данных;</li>
    <li>согласие субъектов персональных данных на обработку их персональных данных.</li>
</ul>

<h2>3. Объем и категории обрабатываемых персональных данных</h2>

<p><strong>3.1.</strong> Обработка персональных данных ограничивается достижением конкретных, заранее определенных и законных целей.</p>

<p><strong>3.2.</strong> Оператор обрабатывает персональные данные Посетителей сайта только в случае их добровольной отправки через формы обратной связи:</p>
<ul>
    <li>фамилия, имя, отчество;</li>
    <li>номер телефона;</li>
    <li>адрес электронной почты.</li>
</ul>

<h2>4. Порядок и условия обработки персональных данных</h2>

<p><strong>4.1.</strong> Обработка персональных данных осуществляется Оператором в соответствии с требованиями законодательства Российской Федерации.</p>

<p><strong>4.2.</strong> Обработка персональных данных осуществляется с согласия субъектов персональных данных на обработку их персональных данных.</p>

<p><strong>4.3.</strong> Оператор не осуществляет трансграничную передачу персональных данных.</p>

<h2>5. Меры обеспечения безопасности персональных данных</h2>

<p><strong>5.1.</strong> Для защиты персональных данных от неправомерного доступа ИП Щербович Е.Н. принимает необходимые правовые, организационные и технические меры.</p>

<h2>6. Условия использования файлов «cookie»</h2>

<p><strong>6.1.</strong> «Cookie»-файлы – это небольшие текстовые файлы, размещаемые на компьютере Посетителя веб-сайтами.</p>

<p><strong>6.2.</strong> Все «cookie»-файлы на веб-сайте Оператора используются исключительно для функциональности сайта:</p>
<ul>
    <li><strong>_sessionid</strong> - идентификатор сессии для хранения данных корзины покупок;</li>
    <li><strong>_csrftoken</strong> - токен защиты от CSRF-атак.</li>
</ul>

<p><strong>6.3.</strong> Вы можете настроить браузер на блокировку «cookie» файлов, но в этом случае некоторые функции сайта перестанут работать.</p>

<hr>

<p><a href="/consent/">Согласие на обработку персональных данных</a></p>'''

    def get_consent_content(self):
        return '''<p>Я, являясь посетителем Сайта и осуществляя отправку формы обратной связи в процессе оформления заказа на сайте <a href="https://onesimus25.ru/">https://onesimus25.ru/</a> (далее – Сайт), принимаю настоящее Согласие на обработку своих персональных данных (далее – Согласие).</p>

<p>Действуя свободно, своей волей и в своем интересе, даю свое согласие Индивидуальному предпринимателю Щербович Елене Николаевне, зарегистрированному в соответствии с законодательством Российской Федерации 21 августа 2019 г за основным государственным регистрационным номером индивидуального предпринимателя 319253600080189, идентификационный номер налогоплательщика 250703414475, расположенному по адресу: 692524, Приморский край, г. Уссурийск, ул. Котовского 17В, (далее-ИП Щербович Е.Н. или Оператор»), которому принадлежит право пользования Сайтом и размещения на нем информации, на автоматизированную, а также без использования средств автоматизации обработку, а именно на сбор, запись, систематизацию, накопление, хранение, уточнение (обновление, изменение), извлечение, использование, передачу (предоставление, доступ), блокирование, уничтожение, удаление своих персональных данных по списку:</p>

<ul>
    <li>фамилия, имя, отчество;</li>
    <li>номер телефона;</li>
    <li>адрес электронной почты.</li>
</ul>

<p>Уведомлен (-а), что Оператор осуществляет обработку персональных данных с целью обработки онлайн-запросов, отправленных через форму обратной связи на сайте.</p>

<p>Регулирование отношений сторон в области обработки персональных данных осуществляется на основании Федерального закона от 27.07.2006 N 152-ФЗ (ред. от 14.07.2022) "О персональных данных" с учётом положений ст. 24 Конституции РФ.</p>

<p>Третьи лица, которые могут обрабатывать персональные данные по поручению ИП Щербович Е.Н. в рамках указанной выше цели:<br>
Общество с ограниченной ответственностью «ВК», ИНН 7743001840, 125167, Москва, Ленинградский проспект, д. 39, стр. 79</p>

<p>Мое согласие является конкретным, предметным, информированным, сознательным и однозначным.</p>

<p>Я подтверждаю, что ознакомлен(а):</p>
<ul>
    <li>с положениями Федерального закона РФ No 152-ФЗ «О персональных данных», и мои права и обязанности в области защиты персональных данных мне понятны;</li>
    <li>с политикой Оператора в отношении обработки персональных данных, размещенной на сайте.</li>
</ul>

<p>Я уведомлен(а), что согласие может быть мной отозвано путем направления Оператору заявления по адресу: 692524, Приморский край, г. Уссурийск, ул. Котовского 17В и/или по электронной почте: <a href="mailto:onesimus25@mail.ru">onesimus25@mail.ru</a></p>

<p>Настоящее согласие действует со дня его подписания и ограничивается сроком 30 дней с момента принятия решения о заключении договора или с момента отказа от дальнейшего оформления заказа либо до дня отзыва согласия в письменной/электронной форме (в зависимости от того, что произойдет раньше).</p>

<p><a href="/privacy-policy/">Политика в отношении обработки персональных данных</a></p>'''

    def get_public_offer_content(self):
        return '''<p>Обращаем ваше внимание на то, что данный интернет-сайт, а также вся информация о товарах и ценах, предоставленная на нём, носит исключительно информационный характер и ни при каких условиях не является публичной офертой, определяемой положениями Статьи 437 Гражданского кодекса Российской Федерации.</p>

<p>Для получения подробной информации о наличии и стоимости указанных товаров и (или) услуг, пожалуйста, обращайтесь к менеджеру сайта с помощью специальной формы связи или по телефонам <a href="tel:+79143229777">8 (914) 322 97 77</a>,<br>
<a href="tel:+79244248777">8 (924) 424 87 77</a>.</p>

<h2>Гражданский кодекс РФ. Глава 28. Статья 437.</h2>

<p><strong>1.</strong> Реклама и иные предложения, адресованные неопределенному кругу лиц, рассматриваются как приглашение делать оферты, если иное прямо не указано в предложении.</p>

<p><strong>2.</strong> Содержащее все существенные условия договора предложение, из которого усматривается воля лица, делающего предложение, заключить договор на указанных в предложении условиях с любым, кто отзовется, признается офертой (Не является публичной офертой).</p>'''

    def get_wholesale_content(self):
        return '''<p>Мы предлагаем выгодные условия для оптовых покупателей автозапчастей.</p>

<h2>Преимущества работы с нами</h2>
<ul>
    <li>Прямые поставки от производителя</li>
    <li>Специальные цены для оптовых клиентов</li>
    <li>Индивидуальные условия сотрудничества</li>
    <li>Гибкая система скидок</li>
    <li>Быстрая обработка заказов</li>
</ul>

<h2>Как стать оптовым клиентом</h2>
<ol>
    <li>Свяжитесь с нами по телефону или через форму обратной связи</li>
    <li>Сообщите о вашем интересе к оптовым закупкам</li>
    <li>Получите персональное предложение и прайс-лист</li>
    <li>Заключите договор на выгодных условиях</li>
</ol>

<h2>Контакты для оптовых клиентов</h2>
<p>Телефон: <a href="tel:+79143229777">8 (914) 322 97 77</a></p>
<p>Email: <a href="mailto:onesimus25@mail.ru">onesimus25@mail.ru</a></p>'''
