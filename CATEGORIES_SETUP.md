# Настройка категорий товаров

## Структура категорий

Система использует 4 основные категории из файла `info3.md`:

1. **Автоэлектрика** - датчики, реле, катушки зажигания, свечи, шлейфы
2. **Двигатель и выхлопная система** - двигатель, ГБЦ, генератор, стартер, турбина, форсунки, фильтры, радиатор, помпа и т.д.
3. **Детали подвески** - амортизаторы, пружины, рычаги, сайлентблоки, рулевая рейка, шаровая опора
4. **Трансмиссия и тормозная система** - сцепление, КПП, колодки, суппорт, привод, ШРУС

## Создание категорий

### Вариант 1: Создать категории сразу (рекомендуется)

Выполните management команду для создания всех основных категорий:

```bash
python manage.py create_categories
```

Эта команда создаст все 4 основные категории из структуры `info3.md`.

### Вариант 2: Автоматическое создание при импорте

Категории будут автоматически создаваться при импорте товаров через админку, если:
- Включена опция "Автоматически определять категорию" при импорте
- Или в файле импорта указана колонка "category" с названием категории

## Автоматическое определение категорий

Система автоматически определяет категорию товара по ключевым словам в названии:

- **Автоэлектрика**: датчик, реле, катушка, свеча, шлейф, диодный мост, регулятор напряжения
- **Двигатель и выхлопная система**: двигатель, ГБЦ, генератор, стартер, турбина, форсунка, фильтр, радиатор, помпа, клапан, поршень, коленвал, распредвал
- **Детали подвески**: амортизатор, пружина, рычаг, сайлентблок, рулевая рейка, шаровая опора
- **Трансмиссия и тормозная система**: сцепление, КПП, колодки, суппорт, привод, ШРУС, карданный вал

## Автоматическое создание подкатегорий

При импорте товаров система автоматически создает подкатегории на основе названия товара:

- Например, товар "Амортизатор DAIHATSU 332120" попадет в категорию "Детали подвески" → подкатегория "Амортизаторы"
- Товар "Датчик ABS" попадет в категорию "Автоэлектрика" → подкатегория "Датчики ABS"

## Импорт товаров

При импорте товаров через админку (`/admin/catalog/bulk-import/`):

1. Загрузите файл (CSV или Excel)
2. Включите опцию "Автоматически определять категорию" (если категория не указана в файле)
3. Система автоматически:
   - Определит категорию по названию товара
   - Создаст категорию, если её нет
   - Создаст подкатегорию на основе названия товара
   - Привяжет товар к правильной категории/подкатегории

## Ручное назначение категорий

Вы также можете вручную назначить категорию товару:
1. В админке Django перейдите в раздел "Товары"
2. Откройте нужный товар
3. Выберите категорию из выпадающего списка
4. Сохраните

## Обновление категорий

Если нужно обновить структуру категорий:

1. Обновите файл `info3.md` с новой структурой
2. Обновите `CATEGORY_KEYWORDS` в файле `catalog/services.py`
3. Выполните команду `python manage.py create_categories` (она обновит существующие категории)

## Примечания

- Категории создаются с поддержкой иерархии (родитель-потомок)
- Подкатегории создаются автоматически при импорте товаров
- Система использует транслитерацию для создания URL (slug) категорий
- Все категории по умолчанию активны (`is_active=True`)
