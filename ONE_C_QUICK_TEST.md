# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 1–°

## 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ú–∏–≥—Ä–∞—Ü–∏–∏
```bash
python manage.py makemigrations
python manage.py migrate
```

### –®–∞–≥ 2: –¢–æ–∫–µ–Ω –≤ settings.py
```python
ONE_C_API_KEY = 'test-token-12345'
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
python manage.py runserver
```

---

## 2. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ curl (1 –º–∏–Ω—É—Ç–∞)

### –¢–µ—Å—Ç API endpoint:
```bash
curl -X POST http://localhost:8000/api/1c/sync/ \
  -H "Content-Type: application/json" \
  -H "X-API-Key: test-token-12345" \
  -d '{
    "token": "test-token-12345",
    "products": [
      {
        "sku": "TEST001",
        "name": "–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä",
        "price": 1000.00,
        "stock": 10,
        "is_active": true
      }
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "processed": 1,
  "created": 1,
  "updated": 0,
  "errors": []
}
```

---

## 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∞–¥–º–∏–Ω–∫–µ (2 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:8000/admin/catalog/synclog/`
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ Status: `success`
   - ‚úÖ Errors count: `0`
   - ‚úÖ Created count: `1`

4. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:8000/admin/catalog/product/`
5. –ù–∞–π–¥–∏—Ç–µ —Ç–æ–≤–∞—Ä —Å –∞—Ä—Ç–∏–∫—É–ª–æ–º `TEST001`
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω

---

## 4. –ö–æ–¥ –¥–ª—è 1–° (–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ)

```1c
// –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –¢–µ—Å—Ç–û—Ç–ø—Ä–∞–≤–∫–∏–¢–æ–≤–∞—Ä–∞()
    
    URL–°–∞–π—Ç–∞ = "http://localhost:8000";  // –ò–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω
    –¢–æ–∫–µ–Ω = "test-token-12345";
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º JSON
    –°—Ç—Ä—É–∫—Ç—É—Ä–∞–î–∞–Ω–Ω—ã—Ö = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
    –°—Ç—Ä—É–∫—Ç—É—Ä–∞–î–∞–Ω–Ω—ã—Ö.–í—Å—Ç–∞–≤–∏—Ç—å("token", –¢–æ–∫–µ–Ω);
    
    –ú–∞—Å—Å–∏–≤–¢–æ–≤–∞—Ä–æ–≤ = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
    –¢–æ–≤–∞—Ä = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
    –¢–æ–≤–∞—Ä.–í—Å—Ç–∞–≤–∏—Ç—å("sku", "TEST001");
    –¢–æ–≤–∞—Ä.–í—Å—Ç–∞–≤–∏—Ç—å("name", "–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä");
    –¢–æ–≤–∞—Ä.–í—Å—Ç–∞–≤–∏—Ç—å("price", 1000.00);
    –¢–æ–≤–∞—Ä.–í—Å—Ç–∞–≤–∏—Ç—å("stock", 10);
    –¢–æ–≤–∞—Ä.–í—Å—Ç–∞–≤–∏—Ç—å("is_active", –ò—Å—Ç–∏–Ω–∞);
    –ú–∞—Å—Å–∏–≤–¢–æ–≤–∞—Ä–æ–≤.–î–æ–±–∞–≤–∏—Ç—å(–¢–æ–≤–∞—Ä);
    
    –°—Ç—Ä—É–∫—Ç—É—Ä–∞–î–∞–Ω–Ω—ã—Ö.–í—Å—Ç–∞–≤–∏—Ç—å("products", –ú–∞—Å—Å–∏–≤–¢–æ–≤–∞—Ä–æ–≤);
    
    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ JSON
    –ó–∞–ø–∏—Å—åJSON = –ù–æ–≤—ã–π –ó–∞–ø–∏—Å—åJSON;
    –ó–∞–ø–∏—Å—åJSON.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–°—Ç—Ä–æ–∫—É();
    –ó–∞–ø–∏—Å–∞—Ç—åJSON(–ó–∞–ø–∏—Å—åJSON, –°—Ç—Ä—É–∫—Ç—É—Ä–∞–î–∞–Ω–Ω—ã—Ö);
    –°—Ç—Ä–æ–∫–∞JSON = –ó–∞–ø–∏—Å—åJSON.–ó–∞–∫—Ä—ã—Ç—å();
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º
    –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ = –ù–æ–≤—ã–π HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ("localhost", 8000);
    –ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ù–æ–≤—ã–π –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ;
    –ó–∞–≥–æ–ª–æ–≤–∫–∏["Content-Type"] = "application/json; charset=utf-8";
    –ó–∞–≥–æ–ª–æ–≤–∫–∏["X-API-Key"] = –¢–æ–∫–µ–Ω;
    
    –ü–æ–ø—ã—Ç–∫–∞
        –û—Ç–≤–µ—Ç = –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.–û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–ª—è–û–±—Ä–∞–±–æ—Ç–∫–∏("POST", "/api/1c/sync/", –ó–∞–≥–æ–ª–æ–≤–∫–∏, –°—Ç—Ä–æ–∫–∞JSON);
        –°–æ–æ–±—â–∏—Ç—å("–ö–æ–¥ –æ—Ç–≤–µ—Ç–∞: " + –û—Ç–≤–µ—Ç.–ö–æ–¥–°–æ—Å—Ç–æ—è–Ω–∏—è);
        –°–æ–æ–±—â–∏—Ç—å("–û—Ç–≤–µ—Ç: " + –û—Ç–≤–µ—Ç.–ü–æ–ª—É—á–∏—Ç—å–¢–µ–ª–æ–ö–∞–∫–°—Ç—Ä–æ–∫—É());
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –°–æ–æ–±—â–∏—Ç—å("–û—à–∏–±–∫–∞: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã
```

---

## 5. –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö

### –£—Å–ø–µ—à–Ω—ã–π –ª–æ–≥ (Status: success):
- ‚úÖ Operation type: `api_sync`
- ‚úÖ Status: `success`
- ‚úÖ Status code: `200`
- ‚úÖ Processed count: `1`
- ‚úÖ Created count: `1`
- ‚úÖ Updated count: `0`
- ‚úÖ Errors count: `0`
- ‚úÖ Request IP: –≤–∞—à IP –∞–¥—Ä–µ—Å
- ‚úÖ Request format: `JSON`

### –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏:
- **401 Unauthorized** ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
- **400 Bad Request** ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
- **500 Internal Server Error** ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ Django

---

## 6. –ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏

### –í –∞–¥–º–∏–Ω–∫–µ Django:
1. `/admin/catalog/synclog/` - –≤—Å–µ –ª–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–ø–∏—Å—å ‚Üí —É–≤–∏–¥–∏—Ç–µ –¥–µ—Ç–∞–ª–∏:
   - –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - IP –∞–¥—Ä–µ—Å
   - –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –í –∫–æ–Ω—Å–æ–ª–∏ Django:
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `runserver` –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã:
```
[12/Jan/2024 10:30:45] "POST /api/1c/sync/ HTTP/1.1" 200 123
```

---

## 7. –ß–µ–∫-–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –¢–æ–∫–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ settings.py
- [ ] –¢–µ—Å—Ç —á–µ—Ä–µ–∑ curl –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200
- [ ] –í –∞–¥–º–∏–Ω–∫–µ –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –≤ SyncLog —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `success`
- [ ] –¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–∑ 1–° –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ 200)

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!
