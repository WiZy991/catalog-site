# Быстрая проверка обмена с 1С

## Что проверить СЕЙЧАС:

### 1. В админ-панели Django:
- Зайдите: `/admin/catalog/synclog/`
- Посмотрите последнюю запись:
  - Если есть запись с сегодняшней датой → обмен работает, но товары не создаются
  - Если записей нет → обмен не доходит до Django

### 2. Проверьте директорию с файлами:
- Путь: `media/1c_exchange/`
- Должны быть XML файлы (например, `import0_1.xml`)
- Если файлов нет → 1С не отправляет файлы или они не сохраняются

### 3. Проверьте URL в настройках 1С:
Должен быть один из вариантов:
```
http://ваш_сайт/cml/exchange?type=catalog&mode=checkauth
```
или
```
http://ваш_сайт/cml/exchange/?type=catalog&mode=checkauth
```

### 4. Проверьте логи Django:
- Файл: `logs/django.log`
- Ищите строки: "CommerceML запрос получен!"
- Если их нет → запросы не доходят до Django

## Если обмен работает, но товары не появляются:

1. **Проверьте логи синхронизации** в админке:
   - Сколько товаров обработано?
   - Сколько создано?
   - Есть ли ошибки?

2. **Проверьте товары в админке**:
   - Зайдите: `/admin/catalog/product/`
   - Отфильтруйте по `external_id` (не пустое)
   - Есть ли товары с `external_id`?

3. **Проверьте активность товаров**:
   - У товаров должно быть `is_active = True`
   - У товаров должна быть категория

## Типичные проблемы:

### ❌ Проблема: "Обмен завершен успешно", но товаров нет
**Причина:** Файлы не обрабатываются или товары не проходят валидацию
**Решение:** 
- Проверьте логи синхронизации на ошибки
- Проверьте формат XML файлов от 1С
- Убедитесь, что в XML есть поля `Ид` и `Наименование`

### ❌ Проблема: Файлы не сохраняются
**Причина:** Проблемы с правами доступа или директорией
**Решение:**
- Проверьте, что директория `media/1c_exchange/` существует
- Проверьте права доступа к директории
- Проверьте логи Django на ошибки сохранения

### ❌ Проблема: Запросы не доходят до Django
**Причина:** Неправильный URL или проблемы с сетью
**Решение:**
- Проверьте URL в настройках 1С
- Проверьте, что сайт доступен из сети, где находится 1С
- Проверьте логи веб-сервера (nginx/apache)

## Что делать дальше:

1. Запустите обмен в 1С еще раз
2. Сразу проверьте логи синхронизации в админке
3. Если проблема сохраняется - откройте файл `DIAGNOSE_1C_EXCHANGE.md` для подробной диагностики
